# ============================================================================
# Modern tmux Configuration
# ============================================================================
# Compatible with tmux 2.1+ (tested on tmux 2.x and 3.x)
# Works on macOS, Linux, and GitHub Codespaces
#
# tmux is a terminal multiplexer that lets you:
# - Run multiple terminal sessions in one window
# - Split your terminal into panes
# - Detach and reattach sessions (survive disconnects)
# - Keep processes running in the background
# ============================================================================

# ----------------------------------------------------------------------------
# Prefix Key
# ----------------------------------------------------------------------------
# The prefix is the key you press before tmux commands
# Default is Ctrl-b, but Ctrl-\ is easier to type (no finger stretching)
#
# After changing prefix, you use it like:
#   Ctrl-\ c    Create new window
#   Ctrl-\ |    Split pane vertically
#   Ctrl-\ -    Split pane horizontally

# Set prefix to Ctrl-\
# Ctrl-\ is chosen because:
# - Easy to reach (right pinky to backslash)
# - Rarely used by other programs
# - Doesn't conflict with shell shortcuts
set -g prefix 'C-\'

# Unbind the old prefix (Ctrl-b)
# This frees up Ctrl-b for other uses (like moving back in the shell)
unbind C-b

# Press prefix twice to switch to last window
# Useful for quickly toggling between two windows
bind C-\ last-window

# ----------------------------------------------------------------------------
# Vi Mode
# ----------------------------------------------------------------------------
# Use vi-style key bindings in copy mode and command prompt
# If you're used to Vim, this makes tmux feel natural:
#   - j/k to move up/down in scrollback
#   - / to search
#   - v to start selection, y to copy
setw -g mode-keys vi

# ----------------------------------------------------------------------------
# Performance Tuning
# ----------------------------------------------------------------------------
# Reduce delay after pressing Escape
# Default is 500ms which makes Vim feel sluggish in tmux
# 1ms is fast enough for key sequences but doesn't interfere with Escape
set -sg escape-time 1

# Increase scrollback buffer
# Default is usually 2000 lines, which isn't enough for long build output
# 50000 lines should cover most use cases without using too much memory
set -g history-limit 50000

# Display status messages longer
# When tmux shows a message (like "Config reloaded!"), keep it visible
# for 2 seconds instead of the default 750ms
set -g display-time 2000

# ----------------------------------------------------------------------------
# Configuration Reloading
# ----------------------------------------------------------------------------
# Reload tmux.conf without restarting tmux
# Usage: Prefix r (Ctrl-\ r)
# This is super useful when experimenting with your config
unbind r
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# ----------------------------------------------------------------------------
# Mouse Support
# ----------------------------------------------------------------------------
# Enable mouse support for clicking, scrolling, and resizing
# Useful in GUI terminals and especially in browser-based terminals like
# GitHub Codespaces. You can:
# - Click to select panes
# - Drag borders to resize panes
# - Scroll with the mouse wheel
# - Select text by dragging (automatically enters copy mode)
set -g mouse on

# ----------------------------------------------------------------------------
# Color & Appearance
# ----------------------------------------------------------------------------
# Enable 256 color support
# Makes colors look much better. The "screen-256color" terminal type is
# widely compatible with most programs.
set -g default-terminal "screen-256color"

# Status bar colors
# Dark green background (colour22) with light cyan text (colour195)
# Creates good contrast without being too bright
set-option -g status-style bg=colour22,fg=colour195

# Window status colors in the status bar
# Inactive windows: grey text (colour246) on default background
# Active window: yellow text (colour220) on default background
set-window-option -g window-status-style fg=colour246,bg=default
set-window-option -g window-status-current-style fg=colour220,bg=default

# Window status format
# Shows: window number : window name
# Examples: "1:bash", "2:vim", "3:logs"
set-option -g window-status-format "#I:#W"
set-option -g window-status-current-format "#I:#W"

# ----------------------------------------------------------------------------
# Window & Pane Numbering
# ----------------------------------------------------------------------------
# Start window numbering at 1 instead of 0
# Keyboard number keys go 1-9, so starting at 1 is more intuitive
# (0 is far away on the keyboard)
set -g base-index 1

# Start pane numbering at 1 instead of 0
# Keeps pane numbering consistent with window numbering
setw -g pane-base-index 1

# Automatically renumber windows when one is closed
# If you close window 2 out of 1,2,3, the windows become 1,2 instead of 1,3
# This prevents gaps in your window numbers
set -g renumber-windows on

# ----------------------------------------------------------------------------
# Pane Splitting
# ----------------------------------------------------------------------------
# Split panes with more intuitive keys
# Usage:
#   Prefix |    Split vertically (creates left|right panes)
#   Prefix -    Split horizontally (creates topâ”€bottom panes)
#
# These are more intuitive than the defaults because:
# - | looks like a vertical divider
# - - looks like a horizontal divider
#
# The -c "#{pane_current_path}" part makes new panes open in the same
# directory as the current pane, which is almost always what you want

bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# ----------------------------------------------------------------------------
# Pane Navigation
# ----------------------------------------------------------------------------
# Navigate panes using vim-style hjkl keys
# Usage:
#   Prefix h    Move to left pane
#   Prefix j    Move to pane below
#   Prefix k    Move to pane above
#   Prefix l    Move to right pane
#
# This matches Vim's movement keys and is much faster than the defaults
# (Prefix arrow-key or Prefix o to cycle through panes)

bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# ============================================================================
# Quick Reference
# ============================================================================
# Prefix = Ctrl-\
#
# Session Management:
#   tmux               Start a new session
#   tmux new -s name   Start a named session
#   Prefix d           Detach from session
#   tmux attach        Attach to last session
#   tmux ls            List sessions
#   Prefix $           Rename session
#
# Window Management:
#   Prefix c           Create new window
#   Prefix ,           Rename window
#   Prefix w           List windows
#   Prefix n           Next window
#   Prefix p           Previous window
#   Prefix 1-9         Jump to window number
#   Prefix &           Kill window (prompts for confirmation)
#
# Pane Management:
#   Prefix |           Split pane vertically
#   Prefix -           Split pane horizontally
#   Prefix h/j/k/l     Navigate between panes
#   Prefix z           Zoom pane (fullscreen toggle)
#   Prefix x           Kill pane (prompts for confirmation)
#   Prefix o           Cycle through panes
#   Prefix {           Move pane left
#   Prefix }           Move pane right
#
# Copy Mode (scrollback):
#   Prefix [           Enter copy mode
#   q                  Exit copy mode
#   / or ?             Search forward/backward
#   n / N              Next/previous search result
#   Space              Start selection
#   Enter              Copy selection and exit
#   Prefix ]           Paste
#
# Other:
#   Prefix r           Reload config
#   Prefix :           Enter command mode
#   Prefix ?           Show all key bindings
# ============================================================================
